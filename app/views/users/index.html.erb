<div class="overflow-x-auto">
  <div class="mb-4">
    <h1 class="flex"> Create new User </h1>
    <%= link_to "New User", new_user_path, class: "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" %>
  </div>
  <div class="card">
    <table class="min-w-full divide-y-2 divide-gray-200 bg-white text-sm">
        <thead class="ltr:text-left rtl:text-right">
        <tr>
            <th class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">ID</th>
            <th class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">Firstname</th>
            <th class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">Lastname</th>
            <th class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">Phone</th>
            <th class="whitespace-nowrap px-4 py-2 font-medium text-gray-900" >View Google Map</th>
            <th class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">Actions</th>
        </tr>
        </thead>

        <tbody class="divide-y divide-gray-200">
            <% @users.each do |user| %>
                <tr class="odd:bg-gray-50">
                    <td class="whitespace-nowrap px-4 py-2 font-medium text-gray-900"><%= user.id %></td>
                    <td class="whitespace-nowrap px-4 py-2 text-gray-700"><%= user.firstname %></td>
                    <td class="whitespace-nowrap px-4 py-2 text-gray-700"><%= user.lastname %></td>
                    <td class="whitespace-nowrap px-4 py-2 text-gray-700"><%= user.phone %></td>
                    <td class="whitespace-nowrap px-4 py-2 text-gray-700">
                    <% if user.address.latitude.present? && user.address.longitude.present? %>
                        <%= link_to "View Map", "https://www.google.com/maps?q=#{user.address.latitude},#{user.address.longitude}", target: "_blank", class: "text-blue-500 hover:text-blue-700" %>
                    <% else %>
                        <span class="text-blue-500">No location</span>
                    <% end %>
                    </td>
                    <td class="whitespace-nowrap px-4 py-2 text-gray-700">
                    <%= link_to "Edit", edit_user_path(user) %>
                    <%= link_to "Delete", user_path(user), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "text-red-500" %>
                    </td>
                </tr>
            <% end %>
        </tbody>
    </table>
  </div>
</div>